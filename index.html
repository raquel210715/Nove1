<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>App HÃ bits Saludables</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 0; padding: 0; }
    h2 { margin-top: 10px; }
    .habit { display: flex; align-items: center; justify-content: center; margin: 10px; }
    .circle { width: 25px; height: 25px; border: 2px solid #333; border-radius: 50%; margin-right: 10px; cursor: pointer; }
    .filled { background-color: #4caf50; }
    .boxes { display: flex; justify-content: space-around; margin-top: 20px; }
    .box { width: 70px; height: 70px; border: 2px solid #333; display: flex; align-items: center; justify-content: center; cursor: pointer; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>
<body>
  <h2 id="today-date"></h2>

  <div class="habit"><div class="circle" data-habit="aigua"></div> Beure 2L d'aigua</div>
  <div class="habit"><div class="circle" data-habit="fruites"></div> Menjar 5 fruites o verdures</div>
  <div class="habit"><div class="circle" data-habit="passeig"></div> Fer un passeig</div>
  <div class="habit"><div class="circle" data-habit="dormir"></div> Dormir 8 hores</div>

  <div class="boxes">
    <div class="box" id="box-ta">TA</div>
    <div class="box" id="box-exercici">ğŸ‹ï¸â€â™€ï¸</div>
    <div class="box" id="box-email">âœ‰ï¸</div>
    <div class="box" id="box-reset">ğŸ”„</div>
  </div>

  <script>
  // --- Inicialitzar EmailJS (posa la teva publicKey aquÃ­) ---
  (function(){
    emailjs.init("TEU_PUBLIC_KEY"); 
  })();

  // --- Demanar dades usuÃ ria ---
  const userEmail = prompt("Introdueix el teu email:");
  const userCode = prompt("Introdueix el teu codi de la usuÃ ria:");

  // --- Mostrar data ---
  const dateEl = document.getElementById("today-date");
  const today = new Date();
  const options = { weekday: "long", year: "numeric", month: "long", day: "numeric" };
  dateEl.textContent = today.toLocaleDateString("ca-ES", options);

  // --- HÃ bits ---
  const circles = document.querySelectorAll(".circle");
  circles.forEach(circle => {
    circle.addEventListener("click", () => {
      circle.classList.toggle("filled");
    });
  });

  // --- Variables per guardar dades ---
  let taValor = "";
  
  // --- TA ---
  document.getElementById("box-ta").addEventListener("click", () => {
    const valor = prompt("Introdueix la teva pressiÃ³ arterial (TA):");
    if (valor) {
      taValor = valor;
      alert("Has desat la TA: " + valor);
    }
  });

  // --- Exercici ---
  document.getElementById("box-exercici").addEventListener("click", () => {
    alert("AquÃ­ pots enllaÃ§ar el teu PDF dâ€™exercicis ğŸ’ª");
  });

  // --- Enviar ---
  document.getElementById("box-email").addEventListener("click", () => {
    const habitsStatus = {};
    circles.forEach(c => {
      habitsStatus[c.dataset.habit] = c.classList.contains("filled") ? "âœ”ï¸" : "âŒ";
    });

    const templateParams = {
      email: userEmail,
      codi: userCode,
      data: today.toLocaleDateString("ca-ES", options),
      aigua: habitsStatus.aigua,
      fruites: habitsStatus.fruites,
      passeig: habitsStatus.passeig,
      dormir: habitsStatus.dormir,
      ta: taValor || "No registrada"
    };

    emailjs.send("TEU_SERVICE_ID","TEU_TEMPLATE_ID", templateParams)
      .then(() => {
        alert("Dades enviades correctament âœ…");
      })
      .catch((error) => {
        console.error("Error:", error);
        alert("Error en enviar âŒ");
      });
  });

  // --- Reiniciar ---
  document.getElementById("box-reset").addEventListener("click", () => {
    if (confirm("Segur que vols reiniciar tots els hÃ bits i dades?")) {
      circles.forEach(c => c.classList.remove("filled"));
      taValor = "";
      alert("App reiniciada ğŸ”„");
    }
  });
</script>
</body>
</html>
