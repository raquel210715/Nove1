<!DOCTYPE html><html lang="ca">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>App Hàbits - Dia</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Open+Sans&display=swap" rel="stylesheet">
<style>
  body { margin:0; font-family:'Open Sans',sans-serif; background:#fdfcfb; }
  header { text-align:center; padding:1rem; font-family:'Playfair Display', serif; font-size:2rem; }
  .day-view { max-width:400px; margin:0 auto; padding:1rem; display:flex; flex-direction:column; gap:1rem; }
  .date-display { font-weight:bold; font-size:1.5rem; text-align:center; }
  .habits { display:flex; flex-direction:column; gap:0.5rem; }
  .habit { display:flex; align-items:center; gap:10px; cursor:pointer; }
  .circle { width:20px; height:20px; border-radius:50%; border:2px solid; display:inline-block; }
  .done { background-color:currentColor; }
  .buttons { display:flex; justify-content:space-around; margin-top:1rem; gap:10px; }
  .btn { flex:1; padding:0.8rem; text-align:center; border-radius:10px; background:#eee; cursor:pointer; user-select:none; }
  .message-popup { position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:#ffffffdd; padding:10px 20px; border-radius:20px; box-shadow:0 2px 6px rgba(0,0,0,0.2); font-size:1rem; z-index:1000; animation:fadeOut 3s forwards; }
  @keyframes fadeOut { 0%{opacity:1;} 80%{opacity:1;} 100%{opacity:0;} }
  @media(max-width:500px){.circle{width:16px;height:16px;}.btn{padding:0.6rem;font-size:0.9rem;}}
</style>
</head>
<body>
<header>APP HÀBITS - DIA</header>
<div class="day-view">
  <div class="date-display" id="dateDisplay"></div>
  <div class="habits" id="habitsContainer"></div>
  <div class="buttons">
    <div class="btn" id="btnTA">TA</div>
    <div class="btn" id="btnExercici">Exercici</div>
  </div>
  <div class="buttons">
    <div class="btn" id="btnEnviar">Enviar</div>
    <div class="btn" id="btnReinici">Reinici</div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
emailjs.init("Ii-pS-x9zkGqnawB7"); // posa la teva Public Key aquíconst habits=[ {color:'#f5ea16', text:'Exercici'}, {color:'#119a48', text:'Prendre medicació'}, {color:'#3954a3', text:'Menjar 5 fruites o verdures'}, {color:'#c5278e', text:'Caminar 8000 passes'} ];

let habitData=JSON.parse(localStorage.getItem('habitData')||'{}'); const todayKey=new Date().toISOString().split('T')[0];

function renderHabits(){ const container=document.getElementById('habitsContainer'); container.innerHTML=''; habits.forEach((h,i)=>{ const div=document.createElement('div'); div.className='habit'; const circle=document.createElement('span'); circle.className='circle'; circle.style.color=h.color; if(habitData[todayKey] && habitData[todayKey][i]) circle.classList.add('done'); circle.addEventListener('click',()=>{ toggleHabit(todayKey,i,circle); }); const text=document.createElement('span'); text.textContent=h.text; div.appendChild(circle); div.appendChild(text); container.appendChild(div); }); }

function toggleHabit(key,index,circleEl){ habitData[key]=habitData[key]||Array(habits.length).fill(false); habitData[key][index]=!habitData[key][index]; circleEl.classList.toggle('done'); localStorage.setItem('habitData',JSON.stringify(habitData)); }

function showMessage(msg){ const popup=document.createElement('div'); popup.className='message-popup'; popup.textContent=msg; document.body.appendChild(popup); setTimeout(()=>popup.remove(),3000); }

function enviarResum(){ // comprovar si hi ha email guardat const email=localStorage.getItem('userEmail'); const codi=localStorage.getItem('userCode'); if(!email || !codi){ showMessage('No hi ha email o codi guardat!'); return; }

const message='Hàbits del dia: '+(habitData[todayKey]||[]).map((v,i)=>habits[i].text+': '+(v?'✔':'✖')).join(', '); emailjs.send('service_b8osa26','template_0f6celw',{to_email:email,subject:codi,message:message}) .then(()=>showMessage('Enviat correctament')) .catch(e=>showMessage('Error enviant')); }

function reiniciarApp(){ if(confirm('Segur que vols reiniciar l'app?')){ localStorage.clear(); location.reload(); } }

document.getElementById('btnEnviar').addEventListener('click',enviarResum); document.getElementById('btnReinici').addEventListener('click',reiniciarApp);

document.getElementById('btnTA').addEventListener('click',()=>{ showMessage('Aquí apareixeria el popup de TA amb opció foto/llapis'); }); document.getElementById('btnExercici').addEventListener('click',()=>{ showMessage('Aquí apareixeria el PDF corresponent segons el dia'); });

// mostrar data document.getElementById('dateDisplay').textContent=new Date().toLocaleDateString('ca-ES',{weekday:'long',day:'numeric',month:'long',year:'numeric'}); renderHabits(); </script>

</body>
</html>
